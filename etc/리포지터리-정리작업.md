취업준비를 하다보니 조금씩 언제 쯤이면 이력서를 넣어도 될 시점인지 조금씩 감이 오고 있다.<br>

최근에는 IT 업계에서 성공한 사람의 자서전을 틈틈히 읽으면서, 마인드 컨트롤(?)하고 있다. 마인드 컨트롤이라기 보다는 위안을 얻는것 같기도 하고, 편안한 느낌이다. 큰 회사의 CEO인데도, 소탈하고 서민적인 느낌이 멋있었다.<br>

이전에 여기에 굉장히 힘들었던 경험들도 기록으로 남겨뒀었다. 그런데, 이제 이 저장소에는 취업을 준비하기 전에 최소한도의 예의를 갖추기 위해 시작했던 토이프로젝트(=사이드프로젝트)에 대한 주제만을 남겨놓으려 한다. 그래서 그냥 내가 퇴직을 결정했던 이유와 힘들었던 점, 전 직장에서 기술적으로 성장할 수 있었던 경험만 짧게 정리해두어야 겠다는 생각이 들었다.<br>

이전 회사에서 받았던 굉장히 힘들었던 경험은 이제부터는 최대한 잊고(=힘들겠지만), 이제부터는 긍정적인 생각과, 긍정적인 도전만 하고 살아야 겠다는 생각에서 생각을 정리하는 글을 작성하기 시작했다.<br>

<br>

**퇴직했던 이유**<br>

1년 전에 꽤 작은 규모의 스타트업으로 이직했고, 서로 모르던 사이끼리 창업센터에서 연결받아서 사업을 발전시켜 나간 케이스가 아니라 인맥으로 강하게 연결되어 있던 회사로 이직했었다. 지금은 퇴직했다. 이때 회사의 대부분의 사람들이 건너 건너 서로 아는 사이이고 나는 아예 아무도 모르는 사이였는데, 아는 사람 편의를 봐주려고 다른 사람에게 부당하게  업무 구조를 바꿔서 강제로 권유하는 케이스가 꽤 됐다.<br>

내 경우를 예로 들면, 서버팀에서 웹 푸시 처리를 앱개발자들에게 해줘야 하는데, 앱 개발자들에게 일일이 MQ에 붙어서 하게끔 강제로 하겠다 등의 이야기를 했었다. 물론 나는 이때 그렇게 하면 앱 개발자들 힘들어진다고, 그냥 내가 웹 소켓 푸시 서버 개발하겠다고 거듭 말했는데, 그렇게 안되긴 했다. 그런데 이런 강압적인 케이스가 한 사람의 머릿속에서 끊임없이 나오고, 나한테도 결국은 몇번 왔었다. 쉽게 이야기하면 부당한 업무 요구(=강요/푸시)가 꽤 잦았다. 이런 업무 구조에 개인 생활이 안되게끔 하는 업무 결정구조 등이 있었기에 더 이상은 버티기 힘들겠다 생각해서 퇴직신청서를 내고 퇴사를 했었다.<br>

아래에 정리하겠지만, 이런 부당한 업무 푸시로 인해 말도 안되는 장애경험과, 인생경험도 했었다.<br>

힘들었던 경험은 여기까지만 정리해두려고 한다. 더 생각할수록 정말 끔찍하고 트라우마같은 경험이어서... 1년 버틴게 정말 신기하다.<br>

<br>

**그래도 배웠던 좋은 경험**<br>

레거시 코드를 개선해서, 새로운 프로젝트로 리팩토링해서 개선시킨 경험이 꽤 좋은 경험이었던 것 같다. 이때 테스트 케이스도 잘 적용해서, 배포하기 전에 테스트를 거친후에 배포를 하는 습관도 들였었다. 전 직장에서 배운 좋은 경험은 아래의 3가지로 요약되는 것 같다.

- 레거시를 개선해 리팩토링 해서 실제 프로젝트를 완성시킨 경험
- TDD와 테스트케이스 작성에 대한 의견이 조금 더 성숙해진 경험
- 생산자/소비자 구조 설계 + 캐시자료구조 설계 + 프로젝트 완주

여기에 더해서 Stream API에 더 익숙해지긴 했었다.<br>

API 개발이나 테이블 설계 이런 업무도 있었지만, 전 직장에서 가장 크게 경험하고, 개인적으로 성장할 수 있었던 계기는 위의 3가지가 핵심이지 않을까 싶었다. 혼자서 사막에 떨어져서 지도 하나만 보고서 목적지로 이동하는 것 같은 기분이었던 것 같다.<br>

<br>

아쉬운 점은 프로젝트의 첫 시작을 WebFlux 로 시작했다면, 훨씬 안정적으로 동작했을 것이라는 생각이다. 데이터 애플리케이션 개발 초기 단계에 Project Reactor 도입에 대해 팀원들에게 제안했는데, 한 분은 동의했고, 나머지 한 사람은 거절했다. 그래서 Stream API, CompletableFuture, Executor 프레임워크 기반으로 개발을 해왔는데, 운영하면서 느낀점은 이랬다. Stream 은 재사용이 안되는 Source다. 따라서 매번 다른 로직에 넘겨줄때 Collect 를 해줘야 하는데, 이게 실제 트래픽이 과도하게 몰리는 30분 구간대의 힙덤프를 보면 collect 시에 조금씩의 지연을 만들어내고 있었다.<br>

다른 구간대의 병목현상들은 모두 생산자/소비자 모델과 캐시+맵기반 큐 자료구조를 설계/구현 해서 병목없이 부드럽게 처리되도록 처리를 했었다. 이때 새로 배운점은 M 증권사 개발 부장님이 이야기하신대로, 큐에 너무 크게 쌓아두지 말고, 짧게 짧게 즉시 처리해야 한다는 이야기가 꽤 힌트로 작용했었다. 이 힌트를 듣기 전까지는 나도 내 멋대로 부딪혀서 실패를 자주 했었다. 이래서 사람은 겸손해야 한다는걸 느꼈었다.<br>

"숙제를 가급적 큰 크기로 밀리지 말고, 가급적 짧은 크기로 숙제를 만들어놔야 숙제를 바로바로 풀수 있다" 하는 쑥스럽긴 하지만 내 방식대로의 비유를 혼자 만들어내기도 했었다ㅋㅋ<br>

이 생산자/소비자 구조 로직에 테스트 케이스를 작성했던 경험도 캐시로직을 어떻게 하면 테스트 케이스로 작성할수 있지? 하는 고민을 하게 되면서 테스트 케이스를 작성할 수 있는 구조로 코드를 어떻게 짜야 하는지 경험을 할 수 있게끔 도와줬던 경험이었다. 아마 대기업에서 일한다면, 이런 경험을 처음부터 할 경험은 많지 않을 것 같다는 생각이 들었다.<br>

<br>

**장애경험**<br> 요약쓰

나스닥은 보통 레피니티브라고 하는 데이터 벤더로부터 데이터를 신청해서 소켓데이터를 받아서 실시간 처리를 한다. 깊게 이야기할수는 없지만, 쉽게 설명하면 프리미엄계정과 베이직 계정이 있다. 프리미엄 계정은 첫 1년 동안은 무료로 사용가능하다. 다만 1년 후에는 과금이 되는데 베이직에 비해 많이 비싸다. 이렇게 데이터를 수신하는 것 역시 레피니티브에서 지정한 위치의 지정한 서버에 하드웨어 구성을 매뉴얼대로 맞춰서 해줘야 수신이 된다.<br>

내가 입사했을 때 하드웨어는 모두 맞춰져 있지만, 스케일업을 주기적으로 해나가야 하는 상태였고, 프리미엄 계정의 1년 기간이 만료가 가까워지는 시점이었다. 입사 후 4개월 후가 된 시점부터 베이직 계정으로 전환해야 한다는 이야기를 들었었다. 물론 나는 이때 베이직계정이 뭔지 프리미엄계정이 뭔지도 모르는 상태로 프로젝트에 투입됐다. 그리고 스타트업의 사정상 1인 개발체제였다.<br>

이때 한달 내에 장애가 잘 나던 푸시로직/데이터 저장역할을 하던 데이터 애플리케이션을 개선해서 배포해야 했고, 테이블도 설계가 모두 달라져서 시간 컬럼도 달라진 상태였다. 그리고 벤더측인 레피니티브로부터 시간필드가 어떤 필드로 오는지도 달라진 상태였다. 이 시간 필드는 아이콘이라는 프로그램에서 볼 수 있는데, 이 필드를 육안으로만 확인하고 시간필드를 이것으로 사용해야 한다는 이야기를 들었다 등등 + 로그 안보고 하다가 사고쳤다. 누가 우겨서 시간필드를 이걸로 해야 한다고만 했느데, 그대로 가다가 결국 장애를 냈고 담당자들은 모두 도망치고 있는상태. 매일을 밤새면서 시간필드가 어떤걸로 오는지 일일이 로그파일을 떠서 처리하는 등의 일을 했다.











